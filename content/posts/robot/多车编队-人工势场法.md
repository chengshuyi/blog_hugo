---
title: "多车编队 人工势场法"
date: 2020-04-04T10:02:06+08:00
description: ""
draft: false
tags: [机器人,多车编队]
categories: [机器人]
---
人工势场法，即Artificial Potential Field，最早于20世纪80年代中期，由Khatib和Krogh提出的一种虚拟力法，其基本思想是将机器人在环境中的运动视为一种虚拟的人工受力场中的运动，其中障碍物对机器人产生斥力，而目标点对机器人产生引力，引力和斥力的合力作为机器人的加速力来控制机器人的运动方向和计算机器人的位置。

人工势场法具有结构简单、易于理解、便于实现实时控制的优点。其缺点也非常明显，比较容易陷入局部极小值问题，即机器人受到的合力为零，机器人停止运动，但却没有到达目标位置，陷入局部极小值。对于编队机器人数量比较大或者编队处于复杂环境中时，极小值问题显得尤为突出。此外，应用人工势场法的主要工作在于势函数的设计，对于未知环境中无法得知障碍物的尺寸、形状，这使得很难选取合理的势场点，进而很难设计出良好的势函数。基于这个原因，目前人工势场法主要用于全局环境已知情况下的多机器人编队。

下图中包括多机器人，障碍物和目标物，目标位置势场最低，即其虚拟重力势能是最小的,机器人的最初处于较高的位置因此具有较大的重力势能，环境中的障碍物可以看成为重力场中的凸点,因此机器人由于重力势能从初始位置运动到目标位置的过程可以看成**从高处向低处**运动的物体。环境中虚拟的势场用等势线的形式表现出来，即图中的密集分布的曲线上的势场都是相等的。因此容易得到如果机器人的运动模型是**完整约束**的，则机器人的理想运动曲线应该是**垂直于所有的等势线**的。然而因为机器人模型和障碍物形状的不规则，使得势场法在实际应用中存在一定的缺陷[^1]。

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200405135443.png)

机器人群集的基本特征：避障避碰、速度匹配和群集中心。相对的，在多机器人群集势场包含三个基本特征，因此可设$U_{obstacle}(q)$为障碍物产生的势场,$U_{neighbor}(q)$为群集中周围邻域的机器人产生的势场，$U_{centre}(q)$为群集中心产生的势场，另外群集运动目标产生的势场为$U_{goal}(q)$，其中q表示机器人的当前位置。进行势场叠加后可得：
<div>
$$
U_{\Sigma}(q)=\underbrace{U_{\text {goal }}(q)+U_{\text {centre }}(q)}_{\text {引力势场 }}+\underbrace{\sum U_{\text {obstacles }}(q)}_{\text {斥力势场 }}+\underbrace{\sum U_{\text {neighbors }}(q)}_{\text {引力/斥力同时存在 }}\\
F(q) = -\nabla U_{\Sigma}(q)
$$
</div>
$U_{\Sigma}(q)$表示机器人在环境中$q$位置时的综合势场，$F(q)$则表示势场中的势场力，方向沿势场的负梯度方向。

在通常情况下，对于机器人而言环境地图一般都是未知的，常用的策略是传感器对环境进行实时感知并获得局部的位置信息，以进行决策，因此基于这种反应式的势场反馈导航原理如下图所示：

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200405140801.png)

### 目标势场和障碍物势场

目标势场体现一种全局的引力效应，即势场存在于环境中一切位置，表现出来的特性为机器人离目标点越远，引力越大，按照这种规律可以建立目标势场函数：
<div>
$$
\left\{\begin{array}{ll}
U_{goal}(x) = \frac{1}{2}k(x-x_{goal})^2\\
F_{goal}(x) = -k\|x-x_{goal}\|
\end{array}\right.
$$
</div>
其中$x_{goal}$为目标点位置，$x$为机器人的实时位置。因此目标点的引力势场通常是基于全局地图的，即机器人和目标点在全局地图中的位置己知，或者机器人
与目标点的相互关系己知为前提。

相对的，障碍物势场为局部排斥力效应，即当且仅当机器人与障碍物之间的距离小于某定值时，才会有斥力势场的存在，而通常情况下要建立具有障碍物的环境地图，尤其是当环境中的障碍物变化的时候，全局地图的建立比较困难，通常采用基于外部传感器的反应式避障。设$f(x)$为当机器人处于$x$位置时激光探测距离，常数$d$为斥力场范围,因此当$f(x)<d$时机器人将受到斥力场的作用。
<div>
$$
\left\{\begin{array}{ll}
U_{\text {obs }}(x)=\left\{\begin{array}{ll}
\frac{\eta}{2}\left(\frac{1}{f(x)}-\frac{1}{d}\right)^{2} & f(x) \leq d \\
0 & f(x)>d
\end{array}\right. \\
F_{\text {obs }}(x)=\left\{\begin{array}{ll}
\|\left(\frac{1}{f(x)}-\frac{1}{d}\right) \frac{\eta \cdot \partial f}{f^{2} \cdot \partial x} \| & f(x) \leq d \\
0 & f(x)>d
\end{array}\right.
\end{array}\right.
$$
</div>

### 邻域机器人势场

借用物理学中对微小粒子（如分子，原子）的引力和斥力的关系，来描述邻域机器人的势场规律。假设机器人$i$与$j$相邻，则$i$相对$j$的势场函数和势场力函数分别为：
<div>
$$
\left\{\begin{array}{l}
U_{n e i g}\left(x_{i} | x_{j}\right)=\frac{\mu}{2} \ln ^{2} \frac{\left\|x_{i}-x_{j}\right\|}{\delta}=\frac{\mu}{2} \ln ^{2} \frac{\left\|r_{i j}\right\|}{\delta} \\
F_{\text {neig }}\left(x_{i} | x_{j}\right)=-\frac{\mu \cdot \delta}{\left(x_{i}-x_{j}\right)} \cdot \ln \frac{|| x_{i}-x_{j} \|}{\delta}=-\frac{\mu \cdot \delta}{r_{i j}} \cdot \ln \frac{\left\|r_{i j}\right\|}{\delta}
\end{array}\right.
$$
</div>
可以得到该势场函数和势场力函数对应的曲线：

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200405142530.png)

### 群集中心势场

在群集中除了目标点、障碍物以及邻域机器人这些可见的势场源外，还存在一种无形的吸引势场使得机器人朝某群集中心聚拢，该势场就是群集中心产生的
势场。首先群集中心本来就是一个非实体的概念，一般将群体的几何中心作为机
器人的群集中心，这样可以缩短机器人聚拢的距离，因此如果设群集中机器人的
个数为$M$个，则群集的几何中心为：
<div>
$$
\bar{x}=\sum_{1}^{M} x_{j} / M
$$
</div>
由于同为引力场，所以类似目标点的势场函数规律可得群集中心的势场和势场力满足：
<div>
$$
\left\{\begin{array}{ll}
U_{centre}(x) = \frac{1}{2}c\|x-\bar{x})^2\| \\
F_{centre}(x) = -c(x-\bar{x})
\end{array}\right.
$$
</div>
<!--省略了部分-->



### 参考文献

[^1]:刘磊. 多移动机器人编队及协调控制研究[D]. 华中科技大学, 2009.

