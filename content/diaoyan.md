





























![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200421075312.png)













![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200421075326.png)



NAND controller

° 8/16-bit I/O width with one chip select signal

° ONFI specification 1.0

° 16-word read and 16-word write data FIFOs

° 8-word command FIFO

° Programmable I/O cycle timing

° ECC assist

° Asynchronous memory operating mode



![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200420150045.png)

达尔文第二代已经结束

osek操作系统-》达尔文操作系统

达尔文第三代

先做第二代



应用：语音和图像



AXI总线 ARM和FPGA通信





文件系统

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200418111707.png)

flash文件系统又包括cramfs和squashfs和jffs/jffs2和yaffs/yaffs2和ubifs。

cramfs是只读压缩的文件系统，可以将文件系统进行压缩，提高存储效率。

squashfs是只读压缩的文件系统，相比于cramfs可以支持更大的单个文件大小。

jffs/jffs2是可以读写，压缩的日志闪存文件系统，主要是应用于nor flash。

yaffs/yaffs2是另一种日志闪存文件系统，主要是为nand型flash设计的文件系统，为了应对flash容量的快速增长。

ubifs是作为jffs2的后继文件系统，满足大容量的需求。

> https://baijiahao.baidu.com/s?id=1610041455262486965&wfr=spider&for=pc

### 2. 达尔文硬件平台介绍

2.3 达尔文硬件平台的架构及约束

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200417153749.png)

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200417154307.png)

5个端口：东南西北四个方向和一个本地

每个端口包含四个虚拟通道,virtual channel

缓存

路由器有路由计算模块用来决定数据的传输路线

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200417155127.png)

x,y各占6bit

头微片

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200417155803.png)

64x64，但是只实现了28x28



16x16：32KB

10: 16KB

2:8KB

### 3. 脉冲神经网络的标准化和约束抽象

1. 首次适应算法：首次适应算法会找到第一个还有容量放下这个物体的箱子（箱子的顺序是根据箱子开始使用的先后顺序来排定的），然后将当前的物体放进去，如果没有放得下当前物体的箱子，那么会使用一个新箱子来放这个物体。
2. 最佳适应：
3. 遗传算法



单个芯片的片上网络是一个28×28的网格，在每个网格节点上有一个神经元处理单元（NPU）。它由一个物理神经元通过**时分复用**的方式达到256个逻辑神经元的效果。并且每个神经元处理单元（NPU）都有属于自己的一块片上存储，分别是8KB、16KB和32KB的几种不同规格。所以在进行网络配置的时候**每个网格节点**上的硬件约束条件就是配置的**神经元总数不超过256**，并且当前配置的节点上面配置的神经元需要的存储权重的空间**不超过相应的片上存储**，对于不同的节点这个值就可能是8KB、16KB或者32KB中的一个。

神经元数量和网络连接数量

### 5. 开发平台软件系统

![](https://gitee.com/chengshuyi/scripts/raw/master/img/20200417150958.png)

1. 需要一个满足本文描述规范的脉冲神经网络作为输入，根据硬件约束条件判断其是否符合硬件要求；

2. **在检查是否符合硬件约束条件的时候，会为整个网络分配好硬件资源，即按第三章所述的方案来执行**

   > 主要是看神经元数量和连接数

1. **将分配好的硬件资源映射到芯片上，并对其进行最优化求解，即采用第四章所述的算法。**

   > 找到功耗最小的映射方案

1. 具体部署到芯片上了，这时候先会生成配置文件，然后通过网口将配置信息传递到用于芯片和PC间通信转发的FPGA，再由FPGA将配置信息发送到芯片上
2. 配置完成之后就是将数据输入芯片，以及对这个脉冲神经网络的软件仿真，输入数据采用的是已经编码成脉冲的输入，最后读出芯片运行的结果并与软件仿真结果进行对比，如果结果不一致就可以开始对芯片进行调试。





脉冲神经网络

基于脉冲神经网络的仿脑计算芯片 这种芯片直接用硬件实现了脉冲神经元模型以及神经元之间的连接，一般通过片上网络来实现神经元之间的通信，并且它有大量的核，而神经元就分布在不同的核即片上网络节点上。

对于基于脉冲神经网络的仿脑计算芯片的编程，关键在于神经元在仿脑芯片上的分配，将脉冲神经网络配置到芯片上时如何配置才可以满足芯片实时运行的同时功耗尽可能小，是学术界和工业界都在探索的研究课题。

本文的应用开发平台，使用分区域的方式把脉冲神经网络分配到芯片的不同节点，从而将脉冲神经网络转换成为一个规模较小的并且每个节点对应芯片上一个节点的网络，然后在映射时分别对功耗和负载进行优化使网络满足实时性和低功耗的需求。本文采用了一种通用化的脉冲神经网络描述规范，开发环境以该规范描述的网络为输入，实现了应用的自动部署、运行以及调试仿真，让应用开发者几乎不需要考虑达尔文芯片特定的一些硬件约束。

现在有很多神经网络芯片，但是很大一部分都是为传统神经网络进行加速的，这类芯片虽然用于特定的算法的时候有比较好的效果，但是其生物相似性是不高的，要更好的模拟大脑，更好的办法是用脉冲神经网络。和经典的神经网络不同的是，其神经元之间的通信是利用的脉冲来实现的，而不是传递一个具体的数值，这和在生物神经网络里面的情况一样，并且在每个神经元的内部也不是进行一个数值计算，而是模拟了生物神经元的行为。

真北” 4096个处理核，在每个核上还有256个神经元，总共拥有100万个神经元和2.56亿个突触连接 每秒进行266G次的定点运算

真北的每个核有256个轴突和一个256×256的突触交叉开关

“天机” 

个芯片包含了6个核，每个核可以支持256个神经元的运算 在核之间通过一个2×3的片上网络（Network on Chip）相连，每秒可以进行的定点运算次数最多可以达到153.6G 153.6G

“达尔文”芯片 2048个神经元和4194304个突触连接，并且支持15种不同的突触延时 28×28的片上网络来连接处理核 每个核上最多可以支持256个神经元

在多核系统中用片上网络来代替总线和交叉开关是一个很好的选择。、



























































